<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - MovieTrack</title>
    <link rel="icon" href="assets/logo.svg" type="image/svg+xml">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <!-- Hamburger Menu Button -->
            <button class="hamburger-menu" id="hamburgerBtn" title="Menu">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="nav-brand">
                <a href="dashboard.html" class="logo-link">
                    <img src="assets/logo.svg" alt="MovieTrack Logo" class="logo-svg">
                    <h1>MOVIETRACK</h1>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="dashboard.html" class="active"><i class="fas fa-th-large"></i> Dashboard</a></li>
                <li><a href="categories.html"><i class="fas fa-layer-group"></i> Categories</a></li>
                <li><a href="#" id="viewModeBtn" class="view-mode-btn" title="Change View Mode"><i class="fas fa-th"></i></a></li>
                <li><a href="#" id="themeToggleBtn" class="theme-toggle-btn" title="Toggle Theme"><i class="fas fa-moon"></i></a></li>
                <li><a href="#" id="profileBtn" class="profile-icon"><i class="fas fa-user-circle"></i></a></li>
                <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
        </div>
    </nav>

    <!-- Sidebar -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h3><i class="fas fa-film"></i> Menu</h3>
            <button class="close-sidebar" id="closeSidebarBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="sidebar-content">
            <!-- Search in Sidebar -->
            <div class="sidebar-search">
                <input type="text" id="sidebarSearchInput" placeholder="Search movies & TV shows...">
                <i class="fas fa-search"></i>
                <div id="sidebarSearchResults" class="tmdb-results" style="display: none;"></div>
            </div>
            
            <ul class="sidebar-menu">
                <!-- Active Features -->
                <li class="menu-section-title">Browse</li>
                <li>
                    <a href="#" id="sidebarUpcoming">
                        <i class="fas fa-clock"></i>
                        <span>Upcoming Releases</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="sidebarCategories">
                        <i class="fas fa-th-large"></i>
                        <span>Categories</span>
                    </a>
                </li>
                
                <li class="menu-divider"></li>
                
                <!-- Coming Soon Features -->
                <li class="menu-section-title">Features</li>
                <li>
                    <a href="#" class="coming-soon">
                        <i class="fas fa-chart-line"></i>
                        <span>Analytics</span>
                        <span class="badge">Coming Soon</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="coming-soon">
                        <i class="fas fa-users"></i>
                        <span>Friends</span>
                        <span class="badge">Coming Soon</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="coming-soon">
                        <i class="fas fa-share-alt"></i>
                        <span>Share List</span>
                        <span class="badge">Coming Soon</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="coming-soon">
                        <i class="fas fa-download"></i>
                        <span>Export Data</span>
                        <span class="badge">Coming Soon</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="coming-soon">
                        <i class="fas fa-bell"></i>
                        <span>Notifications</span>
                        <span class="badge">Coming Soon</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="coming-soon">
                        <i class="fas fa-calendar"></i>
                        <span>Watchlist Calendar</span>
                        <span class="badge">Coming Soon</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="coming-soon">
                        <i class="fas fa-trophy"></i>
                        <span>Achievements</span>
                        <span class="badge">Coming Soon</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="coming-soon">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                        <span class="badge">Coming Soon</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Sidebar Overlay -->
    <div id="sidebarOverlay" class="sidebar-overlay"></div>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal" style="display: none;">
        <div class="modal-content modal-profile">
            <span class="close" onclick="document.getElementById('profileModal').style.display='none'">&times;</span>
            <div class="profile-header">
                <div class="profile-avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="profile-name-container">
                    <h2 id="profileName">User</h2>
                    <button id="editNameBtn" class="btn-edit-name" title="Edit Name">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <p id="profileEmail" class="profile-email">user@example.com</p>
            </div>
            
            <div id="editNameSection" class="edit-name-section" style="display: none;">
                <div class="edit-name-form">
                    <h4><i class="fas fa-user-edit"></i> Edit Username</h4>
                    <input 
                        type="text" 
                        id="newUserName" 
                        placeholder="Enter new username"
                        maxlength="50"
                    />
                    <div class="edit-name-actions">
                        <button class="btn btn-primary" id="saveNameBtn">
                            <i class="fas fa-save"></i> Save
                        </button>
                        <button class="btn btn-secondary" id="cancelNameBtn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="profile-stats-grid">
                <div class="profile-stat-item">
                    <div class="profile-stat-icon">
                        <i class="fas fa-film"></i>
                    </div>
                    <div class="profile-stat-info">
                        <h3 id="profileTotalMovies">0</h3>
                        <p>Total Content</p>
                    </div>
                </div>
                <div class="profile-stat-item">
                    <div class="profile-stat-icon">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="profile-stat-info">
                        <h3 id="profileWatchedCount">0</h3>
                        <p>Watched</p>
                    </div>
                </div>
                <div class="profile-stat-item">
                    <div class="profile-stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="profile-stat-info">
                        <h3 id="profileAvgRating">0</h3>
                        <p>Avg Rating</p>
                    </div>
                </div>
                <div class="profile-stat-item">
                    <div class="profile-stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="profile-stat-info">
                        <h3 id="profileWatchlistCount">0</h3>
                        <p>Watchlist</p>
                    </div>
                </div>
            </div>

            <div class="profile-details">
                <h3><i class="fas fa-info-circle"></i> Account Details</h3>
                <div class="profile-detail-item">
                    <span class="detail-label"><i class="fas fa-calendar"></i> Member Since:</span>
                    <span class="detail-value" id="profileMemberSince">Loading...</span>
                </div>
                <div class="profile-detail-item">
                    <span class="detail-label"><i class="fas fa-heart"></i> Favorite Genre:</span>
                    <span class="detail-value" id="profileFavoriteGenre">Loading...</span>
                </div>
                <div class="profile-detail-item">
                    <span class="detail-label"><i class="fas fa-trophy"></i> Most Watched:</span>
                    <span class="detail-value" id="profileMostWatched">Movies</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Section -->
    <section class="dashboard">
        <div class="container">
            <div class="dashboard-header">
                <h2><i class="fas fa-th-large"></i> My Dashboard</h2>
                <p>Welcome back, <strong id="userName">User</strong>! 🎬</p>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-film"></i></div>
                    <div class="stat-content">
                        <h3 id="totalMovies">0</h3>
                        <p>Total Movies</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                    <div class="stat-content">
                        <h3 id="watchedMovies">0</h3>
                        <p>Watched</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-clock"></i></div>
                    <div class="stat-content">
                        <h3 id="watchlistMovies">0</h3>
                        <p>Watchlist</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-star"></i></div>
                    <div class="stat-content">
                        <h3 id="avgRating">0</h3>
                        <p>Avg Rating</p>
                    </div>
                </div>
            </div>

            <!-- Add Movie Section -->
            <div class="add-movie-section">
                <h3><i class="fas fa-plus-circle"></i> Add New Content</h3>
                <form id="addMovieForm" class="movie-form">
                    <div class="form-row">
                        <div class="form-group">
                            <select id="contentType" required>
                                <option value="movie">🎬 Movie</option>
                                <option value="tv">📺 TV Show</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <input type="text" id="movieTitle" placeholder="Title" required>
                        </div>
                        <div class="form-group">
                            <input type="number" id="movieYear" placeholder="Year" min="1900" max="2025">
                        </div>
                        <div class="form-group">
                            <select id="movieStatus" required>
                                <option value="">Select Status</option>
                                <option value="watched">Watched</option>
                                <option value="watching">Watching</option>
                                <option value="watchlist">Watchlist</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select id="movieRating">
                                <option value="">Rating</option>
                                <option value="5">⭐⭐⭐⭐⭐</option>
                                <option value="4">⭐⭐⭐⭐</option>
                                <option value="3">⭐⭐⭐</option>
                                <option value="2">⭐⭐</option>
                                <option value="1">⭐</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Add
                        </button>
                    </div>
                    <div id="tvShowFields" style="display: none; margin-top: 15px;">
                        <div class="form-row">
                            <div class="form-group">
                                <input type="number" id="currentSeason" placeholder="Current Season" min="1">
                            </div>
                            <div class="form-group">
                                <input type="number" id="currentEpisode" placeholder="Current Episode" min="1">
                            </div>
                        </div>
                    </div>
                    <div id="watchedDateContainer" style="display: none; margin-top: 15px;">
                        <div class="form-group">
                            <label for="watchedDate" style="display: flex; align-items: center; gap: 8px; color: #ffffff; margin-bottom: 8px; font-size: 14px;">
                                <i class="fas fa-calendar"></i> Watched Date
                            </label>
                            <input type="date" id="watchedDate" max="${new Date().toISOString().split('T')[0]}" style="width: 250px;">
                        </div>
                    </div>
                </form>
            </div>

            <!-- Recommendations Section -->
            <div class="recommendations-section" id="recommendationsSection" style="display: none;">
                <h3><i class="fas fa-magic"></i> Recommended for You</h3>
                <p class="recommendations-subtitle">Based on your highest-rated content</p>
                <div class="recommendations-carousel" id="recommendationsCarousel">
                    <!-- Recommendations will be dynamically added here -->
                </div>
            </div>

            <!-- Search & Filter Section -->
            <div class="filter-section">
                <h3><i class="fas fa-video"></i> My Collection</h3>
                <div class="search-filter-wrapper">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Search by title, director, or genre..." />
                        <button id="searchBtn" class="btn-icon-search">
                            <i class="fas fa-search"></i>
                        </button>
                        <button id="clearSearch" class="btn-icon-clear" style="display:none;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="all-filters-row">
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="watched">Watched</button>
                            <button class="filter-btn" data-filter="watchlist">Watchlist</button>
                        </div>
                        <div class="type-filter-buttons">
                            <button class="type-filter-btn" data-type="movie">
                                <i class="fas fa-film"></i> Movies
                            </button>
                            <button class="type-filter-btn" data-type="tv">
                                <i class="fas fa-tv"></i> TV Shows
                            </button>
                        </div>
                        <div class="sort-dropdown">
                            <label for="sortSelect"><i class="fas fa-sort"></i> Sort by:</label>
                            <select id="sortSelect">
                                <option value="title-asc">Title (A-Z)</option>
                                <option value="title-desc">Title (Z-A)</option>
                                <option value="year-desc">Year (Newest)</option>
                                <option value="year-asc">Year (Oldest)</option>
                                <option value="rating-desc">Rating (Highest)</option>
                                <option value="rating-asc">Rating (Lowest)</option>
                                <option value="date-desc">Recently Added</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Movies List -->
            <div class="movies-grid" id="moviesContainer">
                <!-- Movies will be dynamically added here -->
                <div class="empty-state">
                    <p>No movies yet. Add your first movie above!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Movie Tracker. All rights reserved.</p>
        </div>
    </footer>

    <div id="toast-container"></div>

    <!-- Custom Confirmation Modal -->
    <div id="confirmModal" class="confirm-modal">
        <div class="confirm-modal-content">
            <div class="confirm-modal-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3 id="confirmModalTitle">Confirm Action</h3>
            <p id="confirmModalMessage">Are you sure you want to proceed?</p>
            <div class="confirm-modal-actions">
                <button class="btn btn-danger" id="confirmModalYes">
                    <i class="fas fa-check"></i> Yes
                </button>
                <button class="btn btn-secondary" id="confirmModalNo">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Back to Top Button -->
    <button id="backToTopBtn" title="Go to top"><i class="fas fa-arrow-up"></i></button>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/tmdb.js"></script>
    <script src="js/dashboard-enhanced.js"></script>
</body>
</html>
